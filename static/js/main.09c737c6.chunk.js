(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){},136:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){},142:function(e,t,a){},144:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),o=a.n(s),l=(a(78),a(62)),c=a(63),i=a(68),m=a(64),u=a(70),d=a(33),v=a.n(d),h=a(24);a(134);function p(){return r.a.createElement("div",{className:"NoConversation"},r.a.createElement("h2",null,"Select a conversation from the panel on the left."))}var f=a(8),g=a.n(f);a(136);function E(e){var t=e.message,a=e.style,n=e.username,s=t.created_at,o=t.sender;return r.a.createElement("div",{className:g()({Message:!0,mine:o===n}),style:a},function(e){var t=e.heart,a=e.story_share,n=e.media,s=e.media_share_caption,o=e.media_share_url,l=e.media_owner,c=e.text;return a||t||(s?r.a.createElement("a",{href:o},"Shared ",l,"'s post: ",s):n?r.a.createElement("a",{href:n},r.a.createElement("img",{src:n,alt:"Direct Image"})):c||void 0)}(t),r.a.createElement("br",null),r.a.createElement("em",{className:"timestamp"},v()(s).format("MMM Do YYYY, h:mm:ss a")))}a(138);function y(e){var t=function(t){var a=t.key,n=t.index,s=t.style;return r.a.createElement(E,{key:a,message:e.selectedConversation.conversation[n],style:s,username:e.username})};if(!e.selectedConversation)return r.a.createElement(p,null);var a=e.selectedConversation,n=a.participants,s=a.conversation,o=s.length;return r.a.createElement("div",{className:"Conversation"},r.a.createElement("div",{className:"Conversation-participant"},r.a.createElement("h3",null,n," ",r.a.createElement("span",{className:"small"},"(",o," messages sent since"," ",v()(s[0].created_at).format("MMM Do YYYY"),")"))),r.a.createElement("div",{className:"Conversation-messages"},r.a.createElement(h.a,null,function(e){var a=e.height,n=e.width;return r.a.createElement(h.b,{width:n,height:a,columnWidth:"50%",rowCount:o,rowHeight:65,rowRenderer:t,style:{outline:"none"},scrollToIndex:o-1})})))}var w=a(71);a(140);function C(e){var t=function(t){var a=t.key,n=t.index,s=t.style,o=e.messages[n];return r.a.createElement("li",{className:g()({"ConversationList-item":!0,selected:o===e.selectedConversation}),key:a,style:Object(w.a)({},s),onClick:function(){return e.onConversationSelected(o)}},o.participants.join(", ")," (",o.conversation.length,")")},a=e.messages;return null==a?null:r.a.createElement("ul",{className:"ConversationList"},r.a.createElement(h.a,null,function(e){var n=e.height,s=e.width;return r.a.createElement(h.b,{width:s,height:n,rowCount:a.length,rowHeight:50,rowRenderer:t,style:{outline:"none"}})}))}var b=a(69);a(142);function N(e){return r.a.createElement("div",{className:"UploadForm"},r.a.createElement("div",{className:"UploadForm-instructions"},r.a.createElement("p",null,"IG DM Archive Viewer is a tool that allows you to view your Instagram Direct conversation archive, allowing you to search and see the oldest messages in a DM thread."),r.a.createElement("p",null,"To get started, you'll need to download your Instagram data export by following the official instructions at"," ",r.a.createElement("a",{href:"https://www.instagram.com/download/request/"},"instagram.com/download/request"),"."),r.a.createElement("p",null,"Once you've downloaded your archive, extract the ",r.a.createElement("code",null,".zip")," ","folder, then drag and drop the ",r.a.createElement("code",null,"messages.json")," file into the area below.")),r.a.createElement(b.a,{accept:"application/json",onDrop:function(t,a){if(0!==t.length){var n=new FileReader;n.addEventListener("loadend",function(){var t=JSON.parse(n.result),a={},r=!0,s=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var i=l.value,m=!0,u=!1,d=void 0;try{for(var v,h=i.participants[Symbol.iterator]();!(m=(v=h.next()).done);m=!0){var p=v.value;a[p]=(a[p]||0)+1}}catch(f){u=!0,d=f}finally{try{m||null==h.return||h.return()}finally{if(u)throw d}}}}catch(f){s=!0,o=f}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}e.setUsername(Object.keys(a).reduce(function(e,t){return a[e]>a[t]?e:t})),e.setMessages(t)}),n.readAsText(t[0])}}.bind(this),className:"UploadForm-dropzone",activeClassName:"UploadForm-dropzone-active",rejectClassName:"UploadForm-dropzone-rejected"},function(e){e.isDragActive;var t=e.isDragReject,a=(e.acceptedFiles,e.rejectedFiles);return r.a.createElement(r.a.Fragment,null,(t||a.length>0)&&r.a.createElement("p",null,r.a.createElement("strong",{className:"UploadForm-error"},"File incompatible, please upload a ",r.a.createElement("code",null,".json")," file.")),r.a.createElement("p",null,"Drag and drop ",r.a.createElement("code",null,"messages.json")," from your IG export here, or click to select a file. Only ",r.a.createElement("code",null,".json")," files are accepted."),r.a.createElement("p",null,"All data processing is done right on your computer. Nobody except for you will be able to see your messages."))}))}a(144),a(146);var j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedConversation:null,messages:[],username:null},a.selectConversation=function(e){return a.setState({selectedConversation:e})},a.setMessages=function(e){return a.setState({messages:e.map(function(e){var t=e.conversation,n=e.participants;return{conversation:t.reverse(),participants:n.filter(function(e){return e!==a.state.username})}})})},a.setUsername=function(e){return a.setState({username:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("a",{className:"App-subtitle",href:"https://www.github.com/VictorVation/ig-dm-archive-viewer/"},"GitHub"),r.a.createElement("h1",{className:"App-title"},"IG DM Archive Viewer"),this.state.username&&r.a.createElement("small",{className:"App-username"},"Viewing as: ",this.state.username)),r.a.createElement("div",{className:"App-content"},!this.state.username&&r.a.createElement(N,{setMessages:this.setMessages,setUsername:this.setUsername}),this.state.username&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{messages:this.state.messages,onConversationSelected:this.selectConversation,selectedConversation:this.state.selectedConversation}),r.a.createElement(y,{selectedConversation:this.state.selectedConversation,username:this.state.username}))))}}]),t}(n.Component);o.a.render(r.a.createElement(j,null),document.getElementById("root"))},72:function(e,t,a){e.exports=a(148)},78:function(e,t,a){}},[[72,2,1]]]);
//# sourceMappingURL=main.09c737c6.chunk.js.map